{
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "minLength": 1
    },
    "price": {
      "type": "string",
      "title": "Price",
      "format": "price",
      "customRender": "numeric",
      "deximal": true
    },
    "year": {
      "type": "string",
      "title": "Year",
      "format": "year",
      "customRender": "numeric",
      "stringlength": 4
    },
    "description": {
      "title": "Long Description",
      "type": "string"
    },
    "done": {
      "type": "boolean"
    },
    "due_date": {
      "type": "string",
      "format": "date"
    },
    "rating": {
      "type": "integer",
      "maximum": 5
    },
    "recurrence": {
      "type": "string",
      "enum": ["Never", "Daily", "Weekly", "Monthly"]
    },
    "recurrence_interval": {
      "type": "integer"
    },
    "categories": {
      "type": "object",
      "anyOf": [
        {
          "if": {
            "properties": {
              "productCategory": {
                "const": "Breakfast"
              }
            }
          },
          "then": {
            "properties": {
              "meals": {
                "type": "string",
                "enum": ["eggs", "toast with butter", "salad"]
              }
            },
            "required": ["meals"]
          }
        },
        {
          "if": {
            "properties": {
              "productCategory": {
                "const": "Dinner"
              }
            }
          },
          "then": {
            "properties": {
              "meals": {
                "type": "string",
                "enum": ["borsch", "porridge with cutlet", "salad"]
              }
            },
            "required": ["meals"]
          }
        }
      ]
    },
    "productCategory": {
      "title": "Category",
      "type": "string",
      "enum": ["Breakfast", "Dinner", "Lanch"]
    },
    "productSubcategory": {
      "title": "Subcategory",
      "type": "string",
      "enum": ["toast", "salad", "snecks"]
    }
  },
  "anyOf": [
    {
      "if": {
        "properties": {
          "productSubcategory": {
            "const": "toast"
          }
        }
      },
      "then": {
        "properties": {
          "meals": {
            "type": "string",
            "enum": ["with butter", "with jam"]
          }
        }
      }
    },
    {
      "if": {
        "properties": {
          "productSubcategory": {
            "const": "salad"
          }
        }
      },
      "then": {
        "properties": {
          "meals": {
            "type": "string",
            "enum": ["with tomatos", "with broccoli", "with salmon"]
          }
        }
      }
    },
    {
      "if": {
        "properties": {
          "productSubcategory": {
            "const": "snecks"
          }
        }
      },
      "then": {
        "properties": {
          "meals": {
            "type": "string",
            "enum": ["nuts", "chips", "cookies"]
          }
        }
      }
    }
  ],

  "required": ["name", "price", "productCategory"]
}
